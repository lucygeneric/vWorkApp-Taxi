<!DOCTYPE html> 
<html> 
  <head> 
  <title>Page Title</title> 
  
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.css" />
  <link rel="stylesheet" href="css/styles.css" />
  
  <!-- remote -->
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <!-- vendor -->
  <script type="text/javascript" src="js/vendor/jquery.fn.gmap.min.js"></script>
  <script type="text/javascript" src="js/vendor/jquery.ui.map.extensions.js"></script>
  <script type="text/javascript" src="js/vendor/jquery.cookie.js"></script>
  <!-- vWorkApp -->
  <script type="text/javascript" src="js/vWorkApp/vWorkAppGeo-1.0.0.js"></script>
  
</head> 
<body> 


<div id="tracking" data-role="page" data-theme="b" class="page-map" >
	
	<div data-role="header"><h1 id="status">Status: With Dispatcher</h1></div>
	
	<div data-role="content" class="item"> 
		<div id="map_canvas"></div>
	</div>
	
	<div data-role="footer" class="ui-bar" data-position="fixed"> 
		<a href="index.html" data-icon='alert' class="ui-btn-right" id="date_submit" data-role="button" >Cancel Booking</a>
	</div>
	
</div>


<script type="text/javascript">

$('#tracking').live("pagecreate", function() {
	vWorkTaxico.generateBaseMap($('#map_canvas'));
});

$('#tracking').live("pageshow", function() {
	vWorkTaxico.watchMap();
});

$('#tracking').live("pagehide", function() {
	vWorkTaxico.unWatchMap();
})

	
// BELOW THIS LINE: unsorted geo-bric-a-brac ---------------------------------------------------------------------------------------------------------
	
	
function getGeoData(marker) {
    
    $('#map_canvas').gmap('search', { 'location': marker.getPosition() }, function(found, results) {
        if ( found ) {
            var addr = found[0].formatted_address.split(', ', 4);
            $('#pick_up_button').text(addr[0] + ', ' + addr[1] + ', ' + addr[2] + ', ' + addr[3]);                         
        } else {
            alert('Unable to get GeoSearch data.');
        }
    });
}


</script>

</body>
</html>
